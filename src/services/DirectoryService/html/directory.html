
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.11.5/css/jquery.dataTables.min.css">
<link rel="stylesheet" type="text/css"
  href="https://cdn.datatables.net/responsive/2.2.9/css/responsive.dataTables.min.css">

<style>
  body {
    font-family: sans-serif;
  }

  /* REMOVE or comment out this rule: */
  /* .container {
    width: fit-content;
  } */

  #data-table {
    width: 100%; /* Ensure the table fills its container */
    border-collapse: collapse;
  }

  #data-table th,
  #data-table td {
    border: 1px solid #ddd;
    padding: 8px;
    text-align: left;
    /* Remove width: auto; */
  }

  #data-table th {
    background-color: #f2f2f2;
  }

  /* Ensure these overrides are correctly applied and not cancelled out */
  html.is-tablet .container {
    /* If you still need this for tablet, fine, but consider the base CSS's max-width for tablets */
    /* max-width: none; */ /* Consider removing this to re-enable base CSS max-width logic */
  }

  html.is-mobile-landscape .container {
    /* This is the key rule for the screenshot's issue */
    /* REMOVE this if it's present: max-width: none; */
    overflow-x: auto; /* THIS IS THE MOST IMPORTANT ADDITION FOR VISUAL CONTAINMENT */
    /* Ensure other container properties from base CSS (width, padding, etc.) are active */
  }
</style>

<h2>SCCCC Directory</h2>
<table id="data-table" class="display">
  <thead>
    <tr>
      <th>First</th>
      <th>Last</th>
      <th>Email</th>
      <th>Phone</th>
    </tr>
  </thead>
  <tbody>
  </tbody>
</table>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>
<script type="text/javascript"
  src="https://cdn.datatables.net/responsive/2.2.9/js/dataTables.responsive.min.js"></script>
<script>
  $(document).ready(function () {
    // Check if jQuery is loaded
    if (typeof jQuery === 'undefined') {
      console.error('jQuery is not loaded!');
      return; // Don't proceed with DataTables initialization
    }
    google.script.run.withSuccessHandler(function (data) {
      var tableData = JSON.parse(data);
      var tableBody = $('#data-table tbody');

      tableData.forEach(function (row) {
        var newRow = $('<tr>');
        newRow.append('<td>' + row.First + '</td>');
        newRow.append('<td>' + row.Last + '</td>');
        var emailLink = row.email ? '<a href="mailto:' + row.email + '">' + row.email + '</a>' : '';
        newRow.append('<td>' + emailLink + '</td>');
        var phoneLink = row.phone ? '<a href="tel:' + row.phone + '">' + row.phone + '</a>' : '';
        newRow.append('<td>' + phoneLink + '</td>');
        tableBody.append(newRow);
      });

      // Initialize DataTables only if jQuery is available
      if ($.fn.DataTable) {
        $('#data-table').DataTable({
          "order": [[1, 'asc']],
          "responsive": true,
          "autoWidth": false
        });
      } else {
        console.error('DataTables library not loaded!');
      }
    }).getDirectoryEntries();
  });
</script>